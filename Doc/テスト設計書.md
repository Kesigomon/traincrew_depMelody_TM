# 乗降促進アプリ テスト設計書

**バージョン**: 1.0
**作成日**: 2025年10月11日
**対象システム**: Traincrew 乗降促進アプリ

---

## 1. テスト概要

### 1.1 テスト方針

本アプリケーションのテストは、以下の3層で実施します。

| テストレベル | 目的 | 対象 | 実施方法 |
|-----------|-----|------|---------|
| 単体テスト | 個別クラス・メソッドの動作確認 | ロジック、データ処理 | 自動テスト (xUnit) |
| 結合テスト | コンポーネント間の連携確認 | API連携、音声再生 | 手動テスト + 自動テスト |
| シナリオテスト | 実際の使用シーンでの動作確認 | エンドツーエンド | 手動テスト |

### 1.2 テスト環境

| 項目 | 内容 |
|-----|------|
| OS | Windows 10/11 |
| .NET | .NET 6.0以上 |
| テストフレームワーク | xUnit |
| モックライブラリ | Moq |
| Traincrew API | MockTraincrewApi (テスト用) |

---

## 2. 単体テスト

### 2.1 テスト対象クラス

#### 2.1.1 StationRepository

**テスト項目**:

| テストケースID | テスト内容 | 入力 | 期待結果 |
|-------------|-----------|-----|---------|
| UT-SR-001 | 駅定義CSV正常読み込み | 正常なCSVファイル | 全エントリーが正しく読み込まれる |
| UT-SR-002 | 完全一致する駅の判定 | 在線軌道回路: [SB-01, SB-02, SB-03] | 渋谷1番線と判定 |
| UT-SR-003 | 部分一致（不一致）の駅判定 | 在線軌道回路: [SB-01, SB-02] | 駅在線なし |
| UT-SR-004 | 順序が異なる場合の駅判定 | 在線軌道回路: [SB-03, SB-01, SB-02] | 渋谷1番線と判定 |
| UT-SR-005 | 空の軌道回路リストの判定 | 在線軌道回路: [] | 駅在線なし |
| UT-SR-006 | nullの軌道回路リストの判定 | 在線軌道回路: null | 駅在線なし |
| UT-SR-007 | CSVフォーマットエラー | 不正なCSVファイル | 例外発生 |

**実装例**:

```csharp
public class StationRepositoryTests
{
    [Fact]
    public void UT_SR_002_完全一致する駅の判定()
    {
        // Arrange
        var logger = new Mock<ILogger>();
        var repository = new StationRepository(logger.Object);

        // テスト用CSV作成
        var csvContent = @"駅名,番線,軌道回路1,軌道回路2,軌道回路3
渋谷,1,SB-01,SB-02,SB-03
渋谷,2,SB-04,SB-05,";

        var tempFile = Path.GetTempFileName();
        File.WriteAllText(tempFile, csvContent, Encoding.UTF8);

        repository.LoadFromCsv(tempFile);

        // Act
        var occupiedTracks = new List<string> { "SB-01", "SB-02", "SB-03" };
        var station = repository.FindStation(occupiedTracks);

        // Assert
        Assert.NotNull(station);
        Assert.Equal("渋谷", station.StationName);
        Assert.Equal(1, station.Platform);

        // Cleanup
        File.Delete(tempFile);
    }

    [Fact]
    public void UT_SR_004_順序が異なる場合の駅判定()
    {
        // Arrange
        var logger = new Mock<ILogger>();
        var repository = new StationRepository(logger.Object);

        var csvContent = @"駅名,番線,軌道回路1,軌道回路2,軌道回路3
渋谷,1,SB-01,SB-02,SB-03";

        var tempFile = Path.GetTempFileName();
        File.WriteAllText(tempFile, csvContent, Encoding.UTF8);

        repository.LoadFromCsv(tempFile);

        // Act (順序が異なる)
        var occupiedTracks = new List<string> { "SB-03", "SB-01", "SB-02" };
        var station = repository.FindStation(occupiedTracks);

        // Assert (完全一致なので駅判定成功)
        Assert.NotNull(station);
        Assert.Equal("渋谷", station.StationName);
        Assert.Equal(1, station.Platform);

        // Cleanup
        File.Delete(tempFile);
    }
}
```

---

#### 2.1.2 AudioRepository

**テスト項目**:

| テストケースID | テスト内容 | 入力 | 期待結果 |
|-------------|-----------|-----|---------|
| UT-AR-001 | プロファイルCSV正常読み込み | 正常なCSVファイル | 全エントリーが正しく読み込まれる |
| UT-AR-002 | 駅メロディー取得 | 駅名: 渋谷, 番線: 1 | 正しいファイルパスが返される |
| UT-AR-003 | 駅メロディー未定義時のフォールバック | 駅名: 未定義駅, 番線: 1 | 車両メロディーが返される |
| UT-AR-004 | 車両メロディー取得（上り） | 方向: Up | 上りメロディーが返される |
| UT-AR-005 | 車両メロディー取得（下り） | 方向: Down | 下りメロディーが返される |
| UT-AR-006 | 必須エントリー不足時のバリデーション | 車両メロディー(下り)なし | バリデーションエラー |
| UT-AR-007 | ファイル存在チェック | 存在しないファイルパス | バリデーションエラー |

**実装例**:

```csharp
public class AudioRepositoryTests
{
    [Fact]
    public void UT_AR_002_駅メロディー取得()
    {
        // Arrange
        var logger = new Mock<ILogger>();
        var repository = new AudioRepository(logger.Object);

        var csvContent = @"種別,駅名,番線,上下,ファイルパス
駅メロディー,渋谷,1,,sounds/shibuya_1.mp3
車両メロディー,,,上り,sounds/melody_up.mp3
車両メロディー,,,下り,sounds/melody_down.mp3
車両ドア締まります,,,,sounds/door_train.mp3";

        var tempFile = Path.GetTempFileName();
        File.WriteAllText(tempFile, csvContent, Encoding.UTF8);

        // 音声ファイルを作成（空ファイル）
        Directory.CreateDirectory("sounds");
        File.WriteAllText("sounds/shibuya_1.mp3", "");
        File.WriteAllText("sounds/melody_up.mp3", "");
        File.WriteAllText("sounds/melody_down.mp3", "");
        File.WriteAllText("sounds/door_train.mp3", "");

        repository.LoadProfile(tempFile);

        // Act
        var filePath = repository.GetStationMelody("渋谷", 1);

        // Assert
        Assert.Equal("sounds/shibuya_1.mp3", filePath);

        // Cleanup
        File.Delete(tempFile);
        Directory.Delete("sounds", true);
    }

    [Fact]
    public void UT_AR_003_駅メロディー未定義時のフォールバック()
    {
        // Arrange
        var logger = new Mock<ILogger>();
        var repository = new AudioRepository(logger.Object);

        var csvContent = @"種別,駅名,番線,上下,ファイルパス
車両メロディー,,,上り,sounds/melody_up.mp3
車両メロディー,,,下り,sounds/melody_down.mp3
車両ドア締まります,,,,sounds/door_train.mp3";

        var tempFile = Path.GetTempFileName();
        File.WriteAllText(tempFile, csvContent, Encoding.UTF8);

        Directory.CreateDirectory("sounds");
        File.WriteAllText("sounds/melody_up.mp3", "");
        File.WriteAllText("sounds/melody_down.mp3", "");
        File.WriteAllText("sounds/door_train.mp3", "");

        repository.LoadProfile(tempFile);

        // Act (未定義の駅メロディーを取得)
        var filePath = repository.GetStationMelody("未定義駅", 1);

        // Assert (車両メロディーにフォールバック)
        Assert.Equal("sounds/melody_up.mp3", filePath);

        // Cleanup
        File.Delete(tempFile);
        Directory.Delete("sounds", true);
    }
}
```

---

#### 2.1.3 ModeManager (上下線判定)

**テスト項目**:

| テストケースID | テスト内容 | 入力 | 期待結果 |
|-------------|-----------|-----|---------|
| UT-MM-001 | 偶数列番の判定 | 列番: 1262 | 上り |
| UT-MM-002 | 奇数列番の判定 | 列番: 1261 | 下り |
| UT-MM-003 | 回送番号（偶数）の判定 | 列番: 回1302A | 上り |
| UT-MM-004 | 回送番号（奇数）の判定 | 列番: 回1301A | 下り |
| UT-MM-005 | 数字なしの列番の判定 | 列番: 試運転 | 上り (デフォルト) |
| UT-MM-006 | 空文字列の列番の判定 | 列番: "" | 上り (デフォルト) |
| UT-MM-007 | nullの列番の判定 | 列番: null | 上り (デフォルト) |

**実装例**:

```csharp
public class ModeManagerTests
{
    [Theory]
    [InlineData("1262", Direction.Up)]
    [InlineData("1261", Direction.Down)]
    [InlineData("回1302A", Direction.Up)]
    [InlineData("回1301A", Direction.Down)]
    [InlineData("試運転", Direction.Up)]
    [InlineData("", Direction.Up)]
    [InlineData(null, Direction.Up)]
    public void 上下線判定テスト(string trainNumber, Direction expected)
    {
        // Arrange
        var modeManager = CreateModeManager();

        // Act
        var direction = modeManager.DetermineDirection(trainNumber);

        // Assert
        Assert.Equal(expected, direction);
    }

    private ModeManager CreateModeManager()
    {
        var audioPlayer = new Mock<AudioPlayer>();
        var audioRepository = new Mock<AudioRepository>();
        var apiClient = new Mock<TraincrewApiClient>();
        var stationRepository = new Mock<StationRepository>();
        var state = new ApplicationState();
        var logger = new Mock<ILogger>();

        return new ModeManager(
            audioPlayer.Object,
            audioRepository.Object,
            apiClient.Object,
            stationRepository.Object,
            state,
            logger.Object
        );
    }
}
```

---

#### 2.1.4 ProfileLoader (バリデーション)

**テスト項目**:

| テストケースID | テスト内容 | 入力 | 期待結果 |
|-------------|-----------|-----|---------|
| UT-PL-001 | 必須エントリーチェック（全て存在） | 全必須エントリーあり | IsValid = true |
| UT-PL-002 | 必須エントリーチェック（車両メロディー上り不足） | 車両メロディー上りなし | IsValid = false, MissingEntries含む |
| UT-PL-003 | 必須エントリーチェック（車両メロディー下り不足） | 車両メロディー下りなし | IsValid = false, MissingEntries含む |
| UT-PL-004 | 必須エントリーチェック（車両ドア締まります不足） | 車両ドア締まりますなし | IsValid = false, MissingEntries含む |
| UT-PL-005 | ファイル存在チェック（全て存在） | 全ファイル存在 | IsValid = true |
| UT-PL-006 | ファイル存在チェック（1ファイル不足） | 1ファイル不足 | IsValid = false, MissingFiles含む |

---

### 2.2 単体テスト実行

```bash
# 全単体テスト実行
dotnet test --filter "Category=Unit"

# 特定クラスのテスト実行
dotnet test --filter "FullyQualifiedName~StationRepositoryTests"

# カバレッジレポート生成
dotnet test --collect:"XPlat Code Coverage"
```

---

## 3. 結合テスト

### 3.1 API連携テスト

**テスト項目**:

| テストケースID | テスト内容 | 前提条件 | 操作 | 期待結果 |
|-------------|-----------|---------|-----|---------|
| IT-API-001 | API接続成功 | Traincrewが起動中 | アプリ起動 | 接続成功、デバッグパネルに「接続中」表示 |
| IT-API-002 | API接続失敗 | Traincrewが未起動 | アプリ起動 | エラーダイアログ表示 |
| IT-API-003 | ゲーム状態取得 | API接続中 | - | GameStatus取得成功 |
| IT-API-004 | 在線軌道回路取得 | API接続中、列車在線 | - | 軌道回路リスト取得成功 |
| IT-API-005 | 列番取得 | API接続中 | - | 列番取得成功 |
| IT-API-006 | API接続タイムアウト | API応答なし | API呼び出し | リトライ後、デフォルト値返却 |

**実装例**:

```csharp
public class ApiIntegrationTests
{
    [Fact]
    public async Task IT_API_001_API接続成功()
    {
        // Arrange
        var mockApi = new MockTraincrewApi();
        var logger = new ConsoleLogger();
        var apiClient = new TraincrewApiClient(mockApi, logger, "mock://localhost");

        // Act
        var connected = apiClient.Connect();

        // Assert
        Assert.True(connected);
        Assert.True(apiClient.IsConnected());
    }

    [Fact]
    public async Task IT_API_004_在線軌道回路取得()
    {
        // Arrange
        var mockApi = new MockTraincrewApi();
        mockApi.SetOccupiedTracks(new List<string> { "SB-01", "SB-02", "SB-03" });

        var logger = new ConsoleLogger();
        var apiClient = new TraincrewApiClient(mockApi, logger, "mock://localhost");
        apiClient.Connect();

        // Act
        var tracks = apiClient.GetTrackCircuits();

        // Assert
        Assert.Equal(3, tracks.Count);
        Assert.Contains("SB-01", tracks);
        Assert.Contains("SB-02", tracks);
        Assert.Contains("SB-03", tracks);
    }
}
```

---

### 3.2 音声再生テスト

**テスト項目**:

| テストケースID | テスト内容 | 前提条件 | 操作 | 期待結果 |
|-------------|-----------|---------|-----|---------|
| IT-AU-001 | 音声ファイル再生 | 音声ファイル存在 | Play()呼び出し | 音声再生開始 |
| IT-AU-002 | 音声ファイル停止 | 音声再生中 | Stop()呼び出し | 音声停止 |
| IT-AU-003 | 音声ファイルループ再生 | 音声ファイル存在 | Play(loop: true) | ループ再生開始 |
| IT-AU-004 | 音声ファイル一時停止 | 音声再生中 | Pause()呼び出し | 音声一時停止 |
| IT-AU-005 | 音声ファイル再開 | 音声一時停止中 | Resume()呼び出し | 音声再開 |
| IT-AU-006 | 存在しない音声ファイル再生 | 音声ファイル不存在 | Play()呼び出し | エラーログ出力、無音で継続 |

---

### 3.3 設定ファイル読み込みテスト

**テスト項目**:

| テストケースID | テスト内容 | 前提条件 | 操作 | 期待結果 |
|-------------|-----------|---------|-----|---------|
| IT-CF-001 | 設定ファイル読み込み | appsettings.json存在 | アプリ起動 | 設定読み込み成功 |
| IT-CF-002 | 設定ファイル不存在 | appsettings.json不存在 | アプリ起動 | デフォルト設定使用、新規作成 |
| IT-CF-003 | 設定ファイル保存 | - | 設定変更後保存 | appsettings.json更新 |
| IT-CF-004 | プロファイルCSV読み込み | profile_default.csv存在 | アプリ起動 | プロファイル読み込み成功 |
| IT-CF-005 | 駅定義CSV読み込み | stations.csv存在 | アプリ起動 | 駅定義読み込み成功 |

---

## 4. シナリオテスト

### 4.1 駅モードシナリオ

**テストケースID**: ST-SM-001

**テストシナリオ**: 駅到着から発車までの一連の操作

**前提条件**:
- Traincrewが起動中
- 列車が駅に停車している

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す（初回） | 駅メロディー再生開始 |
| 2 | 駅メロディー終了を待つ | 自動的にドア締まりますアナウンス再生開始 |
| 3 | アナウンス終了を待つ | 再生停止 |
| 4 | 列車を発車させる | 車両モードに切替 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

**テストケースID**: ST-SM-002

**テストシナリオ**: 駅モード中に再度ボタンを押す

**前提条件**:
- 駅モード中
- 駅メロディーまたはアナウンス再生中

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す（初回） | 駅メロディー再生開始 |
| 2 | メロディー再生中にボタンを再度押す | 車両モードの動作（メロディーループ再生開始） |
| 3 | ボタンをリリース | メロディー停止、ドア締まりますアナウンス再生 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

### 4.2 車両モードシナリオ

**テストケースID**: ST-VM-001

**テストシナリオ**: 車両モード基本動作

**前提条件**:
- Traincrewが起動中
- 列車が駅以外の場所にいる

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す | 車両メロディーループ再生開始 |
| 2 | ボタンを押し続ける | メロディーがループ再生され続ける |
| 3 | ボタンをリリース | メロディー停止、ドア締まりますアナウンス再生 |
| 4 | アナウンス終了を待つ | 再生停止 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

**テストケースID**: ST-VM-002

**テストシナリオ**: アナウンス再生中に再度ボタンを押す

**前提条件**:
- 車両モード中
- ドア締まりますアナウンス再生中

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す → リリース | ドア締まりますアナウンス再生開始 |
| 2 | アナウンス再生中にボタンを再度押す | アナウンス即停止、メロディーループ再生開始 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

### 4.3 ポーズ・再開シナリオ

**テストケースID**: ST-PS-001

**テストシナリオ**: ゲームポーズ時の動作

**前提条件**:
- 音声再生中

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す | メロディー再生開始 |
| 2 | Traincrewをポーズ | 音声一時停止 |
| 3 | Traincrewを再開 | 音声再開 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

**テストケースID**: ST-PS-002

**テストシナリオ**: ゲーム終了時の動作

**前提条件**:
- 音声再生中

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | ボタンを押す | メロディー再生開始 |
| 2 | Traincrewで運転終了 | 音声停止、車両モードに切替 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

### 4.4 プロファイル切替シナリオ

**テストケースID**: ST-PR-001

**テストシナリオ**: プロファイル切替

**前提条件**:
- 複数のプロファイルが存在

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | 設定画面を開く | 設定画面表示 |
| 2 | 別のプロファイルを選択 | プロファイル変更 |
| 3 | 保存ボタンをクリック | 新プロファイル読み込み成功 |
| 4 | ボタンを押す | 新プロファイルの音声が再生される |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

### 4.5 エラーハンドリングシナリオ

**テストケースID**: ST-ER-001

**テストシナリオ**: 音声ファイル不足時の動作

**前提条件**:
- 駅メロディーが未定義のプロファイル

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | 駅に停車 | - |
| 2 | ボタンを押す | フォールバック: 車両メロディー再生、警告ログ出力 |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

**テストケースID**: ST-ER-002

**テストシナリオ**: API接続エラー時の動作

**前提条件**:
- Traincrewが未起動

**テスト手順**:

| ステップ | 操作 | 期待結果 |
|---------|-----|---------|
| 1 | アプリを起動 | エラーダイアログ表示 |
| 2 | OKボタンをクリック | アプリ終了 (または接続なしで起動) |

**実際の結果**: _____________

**合否**: □ 合格 □ 不合格

---

## 5. パフォーマンステスト

### 5.1 応答性能テスト

**テスト項目**:

| テストケースID | テスト内容 | 目標値 | 測定方法 |
|-------------|-----------|-------|---------|
| PT-RP-001 | ボタン押下からメロディー再生開始まで | < 100ms | ストップウォッチ計測 |
| PT-RP-002 | API状態取得処理時間 | < 50ms | ログタイムスタンプ差分 |
| PT-RP-003 | 駅判定処理時間 | < 50ms | ログタイムスタンプ差分 |
| PT-RP-004 | UI更新レート | 60 FPS | パフォーマンスモニター |

**実装例**:

```csharp
[Fact]
public void PT_RP_002_API状態取得処理時間()
{
    // Arrange
    var mockApi = new MockTraincrewApi();
    var logger = new ConsoleLogger();
    var apiClient = new TraincrewApiClient(mockApi, logger, "mock://localhost");
    apiClient.Connect();

    // Act
    var stopwatch = Stopwatch.StartNew();
    var gameStatus = apiClient.GetGameStatus();
    stopwatch.Stop();

    // Assert
    Assert.True(stopwatch.ElapsedMilliseconds < 50, $"API call took {stopwatch.ElapsedMilliseconds}ms");
}
```

---

### 5.2 メモリ使用量テスト

**テスト項目**:

| テストケースID | テスト内容 | 目標値 | 測定方法 |
|-------------|-----------|-------|---------|
| PT-MEM-001 | 起動時メモリ使用量 | < 50 MB | タスクマネージャー |
| PT-MEM-002 | 通常動作時メモリ使用量 | < 100 MB | タスクマネージャー |
| PT-MEM-003 | 長時間動作時メモリリーク | なし | 10時間連続稼働後の増加量 < 10 MB |

---

## 6. 負荷テスト

### 6.1 連続動作テスト

**テストケースID**: LT-001

**テスト内容**: 10時間連続動作

**テスト手順**:
1. アプリを起動
2. Traincrewを起動し、連続運転
3. 10時間連続でボタンを定期的に押す (自動化スクリプト使用)
4. メモリリーク、クラッシュがないことを確認

**期待結果**:
- クラッシュしない
- メモリ使用量が安定している
- ログにエラーが記録されていない

---

### 6.2 高頻度入力テスト

**テストケースID**: LT-002

**テスト内容**: 高頻度ボタン押下

**テスト手順**:
1. アプリを起動
2. ボタンを1秒間に10回押す操作を1分間継続
3. クラッシュ、音声再生の乱れがないことを確認

**期待結果**:
- クラッシュしない
- 音声再生が正常に動作する
- UI応答性が低下しない

---

## 7. 回帰テスト

### 7.1 回帰テストチェックリスト

機能追加・バグ修正後に以下のテストを実施します。

| カテゴリ | テストケース | 実施 |
|---------|------------|-----|
| 基本動作 | ST-SM-001: 駅モード基本動作 | □ |
| 基本動作 | ST-VM-001: 車両モード基本動作 | □ |
| モード切替 | ST-SM-002: 駅モード中の再押下 | □ |
| モード切替 | ST-VM-002: アナウンス再生中の再押下 | □ |
| ゲーム連携 | ST-PS-001: ポーズ時の動作 | □ |
| ゲーム連携 | ST-PS-002: ゲーム終了時の動作 | □ |
| 設定管理 | ST-PR-001: プロファイル切替 | □ |
| エラー | ST-ER-001: 音声ファイル不足時の動作 | □ |
| エラー | ST-ER-002: API接続エラー時の動作 | □ |

---

## 8. テスト実施計画

### 8.1 テストスケジュール

| フェーズ | 期間 | 実施内容 |
|---------|-----|---------|
| Phase 1 | 1週目 | 単体テスト実施 |
| Phase 2 | 2週目 | 結合テスト実施 |
| Phase 3 | 3週目 | シナリオテスト実施 |
| Phase 4 | 4週目 | パフォーマンス・負荷テスト実施 |
| Phase 5 | 5週目 | バグ修正、回帰テスト実施 |

### 8.2 テスト体制

| 役割 | 担当者 | 責任 |
|-----|-------|-----|
| テストリーダー |  | テスト全体の管理 |
| 単体テスト担当 |  | 単体テスト実施 |
| 結合テスト担当 |  | 結合テスト実施 |
| シナリオテスト担当 |  | シナリオテスト実施 |

---

## 9. バグ管理

### 9.1 バグ分類

| 重要度 | 定義 | 対応期限 |
|-------|-----|---------|
| Critical | アプリがクラッシュする、基本機能が動作しない | 即座 |
| High | 重要な機能に支障がある | 1週間以内 |
| Medium | 一部機能に支障がある | 2週間以内 |
| Low | 軽微な問題 | リリース前まで |

### 9.2 バグレポートテンプレート

```markdown
## バグID
BUG-001

## タイトル
駅モードでボタンを押してもメロディーが再生されない

## 重要度
High

## 再現手順
1. アプリを起動
2. 駅に停車
3. ボタンを押す

## 期待結果
駅メロディーが再生される

## 実際の結果
何も再生されない

## 環境
- OS: Windows 11
- .NET: 6.0
- Traincrew: バージョン 1.0

## ログ
[ERROR] Audio file not found: sounds/shibuya_1.mp3

## スクリーンショット
(添付)

## 備考
音声ファイルが配置されていない可能性
```

---

## 10. テスト完了基準

以下の条件を全て満たした場合、テストを完了とします。

| 項目 | 基準 |
|-----|-----|
| 単体テスト | カバレッジ 80% 以上 |
| 結合テスト | 全テストケース実施、合格率 100% |
| シナリオテスト | 全シナリオ実施、合格率 95% 以上 |
| パフォーマンステスト | 全目標値達成 |
| Critical/Highバグ | 全て修正済み |
| Medium/Lowバグ | 修正または次バージョンへ延期判断済み |

---

**改訂履歴**

| バージョン | 日付 | 改訂者 | 改訂内容 |
|-----------|------|--------|----------|
| 1.0 | 2025-10-11 |  | 初版作成 |
